<!-- SOLUTION: Fill empty type-trigger containers with spline viewers -->
<!-- Add this to your GLOBAL FOOTER -->

<script>
(function() {
    const CLOUDFLARE_URL = 'https://spline-runtime-pro.pages.dev';

    // Map data-type values to scene names
    const sceneMap = {
        'All Mountain': { id: 'allmountain-showcase', scene: '1000SKISALLMOUNTAIN' },
        'Park': { id: 'park-showcase', scene: '1000SKISPARK' },
        'Carve': { id: 'carve-showcase', scene: '1000SKSCARVE' },
        'Powder': { id: 'powder-showcase', scene: '1000SKISPOWDER' }
    };

    console.log('[FILL CONTAINERS] Starting to fill empty containers...');

    function fillEmptyContainers() {
        // Wait for spline-viewer to be defined
        if (!customElements.get('spline-viewer')) {
            console.log('[FILL CONTAINERS] Waiting for spline-viewer element...');
            setTimeout(fillEmptyContainers, 100);
            return;
        }

        // Find all type-trigger containers
        const containers = document.querySelectorAll('.type-trigger');
        console.log(`[FILL CONTAINERS] Found ${containers.length} type-trigger containers`);

        containers.forEach((container, index) => {
            // Check if container is empty or has no viewer
            if (container.children.length === 0 ||
                (!container.querySelector('spline-viewer') && !container.querySelector('canvas'))) {

                console.log(`[FILL CONTAINERS] Container ${index} is empty or has no viewer`);

                // Try to determine which scene based on data-type or position
                const dataType = container.getAttribute('data-type');
                let config = null;

                if (dataType && sceneMap[dataType]) {
                    config = sceneMap[dataType];
                    console.log(`[FILL CONTAINERS] Found scene for "${dataType}"`);
                } else {
                    // Fallback: use position-based assignment
                    const scenes = Object.values(sceneMap);
                    if (index < scenes.length) {
                        config = scenes[index];
                        console.log(`[FILL CONTAINERS] Using position-based scene (${index})`);
                    }
                }

                if (config) {
                    // Create spline-viewer element
                    const viewer = document.createElement('spline-viewer');
                    viewer.setAttribute('id', config.id);
                    viewer.setAttribute('url', `${CLOUDFLARE_URL}/scenes/${config.scene}/scene.splinecode`);
                    viewer.style.width = '100%';
                    viewer.style.height = '100%';
                    viewer.style.display = 'block';

                    // Clear container and add viewer
                    container.innerHTML = '';
                    container.appendChild(viewer);

                    console.log(`[FILL CONTAINERS] âœ… Added viewer: ${config.id}`);
                } else {
                    console.warn(`[FILL CONTAINERS] No scene mapping for container ${index}`);
                }
            } else {
                console.log(`[FILL CONTAINERS] Container ${index} already has content`);
            }
        });

        // Verify results
        setTimeout(() => {
            const viewers = document.querySelectorAll('spline-viewer');
            console.log(`[FILL CONTAINERS] Total spline-viewers on page: ${viewers.length}`);

            // Check if they're rendering correctly
            viewers.forEach(viewer => {
                const rect = viewer.getBoundingClientRect();
                console.log(`  ${viewer.id}: ${rect.width}x${rect.height}px`);
            });
        }, 1000);
    }

    // Run when DOM is ready
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', fillEmptyContainers);
    } else {
        // DOM already loaded
        setTimeout(fillEmptyContainers, 100);
    }

    // Manual trigger
    window.fillSplineContainers = fillEmptyContainers;

    console.log('[FILL CONTAINERS] ðŸ’¡ Run window.fillSplineContainers() to manually fill containers');
})();
</script>

<!-- ALTERNATIVE: If you want to keep trying the canvas approach -->
<!-- Put this in your Webflow Embed element (inside the type-trigger div): -->

<!-- For Carve ski -->
<div class="type-trigger" data-type="Carve">
    <canvas id="carve-showcase" data-spline-scene="1000SKSCARVE"></canvas>
</div>

<!-- Or directly as spline-viewer -->
<div class="type-trigger" data-type="Carve">
    <spline-viewer
        id="carve-showcase"
        url="https://spline-runtime-pro.pages.dev/scenes/1000SKSCARVE/scene.splinecode">
    </spline-viewer>
</div>